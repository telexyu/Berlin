...............
....
Condividendo schermo
g..., Anton10

............... ha aggiunto g... al gruppo. — 12/03/2025 22:06
............... ha avviato una chiamata che è durata 2 ore. — 12/03/2025 22:06
g... — 12/03/2025 22:24
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attrazioni di Berlino</title>
Mostra
berlino_luoghi.html
19 KB
Anton10 — 12/03/2025 23:01
we
............... — 12/03/2025 23:02
vai sul codice ed elimina quei due span iniziali
perfgetto
g... — 12/03/2025 23:08
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attrazioni di Berlino</title>
Mostra
berlino_luoghi.html
19 KB
............... — 12/03/2025 23:29
https://www.dropbox.com/scl/fi/p6ec1vb6lj7njssk559s8/isola.mp3?rlkey=pugr5z1x8ak59mobfux1vygvc&st=pe3v96p2&raw=1
https://www.dropbox.com/scl/fi/nxp7etmwa6ewztif1bvyy/island-online-audio-converter.com.mp3?rlkey=2x4txrkqfaum7601l2jpgs4c2&st=l4t5vbd5&raw=1
............... — 12/03/2025 23:38
https://www.dropbox.com/scl/fi/dzx36tbmrmgbw6sxl1m5c/zoo-online-audio-converter.com.mp3?rlkey=4707agilq30vplvm9v3lrchds&st=o05cidjp&raw=1
https://www.dropbox.com/scl/fi/bnvh0psxy9uc1f2q905xh/2zooo-online-audio-converter.com.mp3?rlkey=n44qq4ibbqoi6hz4cshb9bzhe&st=s7ukska6&raw=1
Anton10 — 12/03/2025 23:44
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attrazioni di Berlino</title>
Mostra
berlino_luoghi.html
19 KB
............... — 13/03/2025 12:26
https://www.dropbox.com/scl/fi/t8dmkdpexf45q15ex0v6l/museo-tec-online-audio-converter.com.mp3?rlkey=wy01bl1eo0c4nawewltqtnhnz&st=frtl6c2g&raw=1 museo della tecnologia ita
https://www.dropbox.com/scl/fi/20zjzfh4xtzo2ifjlttx4/museo-tec-ing-online-audio-converter.com.mp3?rlkey=26p8udztp5eat3x5eq0yx5gmu&st=zxrhxbf9&raw=1 museo tec in inglese
............... — 13/03/2025 12:36
https://www.dropbox.com/scl/fi/aloa20nsczczc5k0zgbcv/the-reighst-online-audio-converter.com.mp3?rlkey=mkph46oknfe1q0iazcck7ca28&st=sfo0clko&raw=1 il parlamento inglese
............... ha avviato una chiamata che è durata alcuni secondi. — 13/03/2025 12:36
............... ha avviato una chiamata che è durata 17 minuti. — 13/03/2025 12:37
............... — 13/03/2025 12:40
https://www.dropbox.com/scl/fi/vd89g1skyvg6xnhmoij3a/reichs-ita-online-audio-converter.com.mp3?rlkey=9tvwjd6h0cz8lmec0oqwpm509&st=ylwykv15&raw=1 il parlamento italiano
............... — 13/03/2025 18:09
https://www.dropbox.com/scl/fi/bdfsxvibey4imh3r0xbxm/kurfustendam-ita-online-audio-converter.com.mp3?rlkey=3cjru53uie0abkv6zjvbfhfvi&st=2m2m0b66&raw=1  kurfustandamn ita
https://www.dropbox.com/scl/fi/dbwm4630sa96n9ft4w8fw/Parte-10-online-audio-converter.com.mp3?rlkey=ibwfs2201qaewcnvj1ivr4ice&st=3biox0oy&raw=1 kurfustandsam inglese
https://www.dropbox.com/scl/fi/thvgflb4pv9b5q0nujl40/Parte-8-online-audio-converter.com.mp3?rlkey=u5ls33hvckfisphy93z6oul8y&st=m7ejigbe&raw=1  stadio inglese
............... — 13/03/2025 18:17
https://www.dropbox.com/scl/fi/vxz4w53hrnxsrbklyy8ye/stadio-online-audio-converter.com.mp3?rlkey=rslfq9lzyeatpye467exjypd1&st=3qe9keh8&raw=1 stadio in ita
............... — 25/03/2025 17:33
https://www.dropbox.com/scl/fi/rb91izw8q2k040bx2voqz/Parte-7.m4a?rlkey=uspt02mx4oedfvr2n5uxzpehh&st=qc4sk85z&raw=1  east side gallery in inglese
@g...  mi dai una mano
così oggi finiamo
Anton10 — 25/03/2025 17:35
Io ci Sono
Ora arrivo
............... — 25/03/2025 17:38
https://www.dropbox.com/scl/fi/16o9x4zrbqar38etfrlj2/Parte-2.m4a?rlkey=6cqtn169ueo81jnupte74soua&st=yb835pba&raw=1  topografia del terrore inglese
https://www.dropbox.com/scl/fi/survuydqhnz1nl7ch3idi/east.mp3-online-audio-converter.com.mp3?rlkey=j3gv3g3tgr72xy9fsiox8jyee&st=zcc7k1fa&raw=1 east side gallery
Anton10 ha avviato una chiamata che è durata 34 minuti. — 25/03/2025 17:43
............... — 25/03/2025 17:47
https://www.dropbox.com/scl/fi/xr5vai2m56g6b1khhu3xq/topo-online-audio-converter.com.mp3?rlkey=w7kerd8qxz5kwuiu411l0h6c6&st=3cml2gcn&raw=1 topografia in italiano
https://www.dropbox.com/scl/fi/fmcsxmh8os72l20bwukj1/check-online-audio-converter.com.mp3?rlkey=bm85tizp911lyt3ckeciq1yku&st=1ktsigfa&raw=1 checkpoint in ita
............... — 25/03/2025 17:56
https://www.dropbox.com/scl/fi/jwiyaob10zseu55qofl0q/Parte-1.m4a?rlkey=tzsi3sug9y624y3wudcfz25u8&st=5o7u85q5&raw=1 checkpoint in inglese
https://www.dropbox.com/scl/fi/pfim10fywv3zorcn7ide7/0325.MP3?rlkey=hezijafez9vv7f9hr9pg3n4xt&st=bwgqg5ss&raw=1 alexander platz ita
............... — 25/03/2025 18:03
https://www.dropbox.com/scl/fi/glbfvbw0qlkw50r8050il/Parte-4.m4a?rlkey=n3894x3977ap86e4iy9b8k2lp&st=xcljihh9&raw=1
alexander platz in inglese
https://www.dropbox.com/scl/fi/uwfr2zem171fz94linoy8/Auduomo-online-audio-converter.com.mp3?rlkey=2ozm1ok1s42jo1pkya6w2dpzr&st=a7m041b0&raw=1 duomo ita
............... — 25/03/2025 18:10
https://www.dropbox.com/scl/fi/l7sxh04l563wmg4lrj3qw/duomo-online-audio-converter.com.mp3?rlkey=rg46207wzw1j6blh0dva4m6fz&st=5uklo2oj&raw=1
duomo in inglese
............... — 25/03/2025 18:17
memoriale 
museo ebraico 
pallazzo postzang
............... — 25/03/2025 19:04
https://www.dropbox.com/scl/fi/4zvd8rqoviqownnribg8i/mem-online-audio-converter.com.mp3?rlkey=7gbdtwbhwc31w1bkychsfrtvt&st=8fy74t8f&raw=1 memoriale ita 
https://www.dropbox.com/scl/fi/2nqlpxnpcjqo4sf579bmu/muse-e-online-audio-converter.com.mp3?rlkey=8krvtvof1yus12fszpmmze67b&st=mr8hg5mk&raw=1 museo ebraico ita 
https://www.dropbox.com/scl/fi/3be25pja6pnoxxcq3qere/platzzzzz-online-audio-converter.com.mp3?rlkey=13m1eosh323ub13xt0lmrgh55&st=wh5cxt6e&raw=1 postadamer platz
............... — 25/03/2025 19:19
https://www.dropbox.com/scl/fi/sxfx97hvprx7ymmwj77h9/palazzo-online-audio-converter.com.mp3?rlkey=j5ec0dnqw8f2sekqvm1urnefv&st=tvx98o96&raw=1 il palazzo pas ita
https://www.dropbox.com/scl/fi/y4bp6nr27gp9zhrckv203/palace-online-audio-converter.com.mp3?rlkey=2k8b6humbzx0gsblxncobxnx3&st=nxwdrqzu&raw=1 in inglese
............... — 25/03/2025 19:42
https://www.dropbox.com/scl/fi/eigffxiwyztretg2fhsc3/Parte-6.m4a?rlkey=uhhth7tqwjphifrglqv4rvi61&st=3n1nvel7&raw=1 memoriale in inglese
https://www.dropbox.com/scl/fi/dvsigd36lz8cyzozq3o4r/Parte-3.m4a?rlkey=r9cwt90quqxfcpktsd2xc8rbx&st=ssnin7mz&raw=1 museo degli ebrei inglese
@Anton10  dimmi se abbiamo finito
............... — 25/03/2025 21:17
???
............... ha avviato una chiamata che è durata alcuni secondi. — 21:01
Anton10 ha avviato una chiamata. — 21:24
Anton10 — 21:30
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlino - Capitale della Germania</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #f5f5f5, #e3e3e3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
        }
        header {
            position: relative;
            text-align: center;
            color: white;
            padding: 2rem 0;
            background: url(https://i.pinimg.com/originals/23/48/43/2348435d463668414e926ffe10e35dd6.gif) center center / cover no-repeat;
            height: 450px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        header h1 {
            position: relative;
            z-index: 2;
            background: linear-gradient(to right, #ff6b81, #ff4757);
            display: inline-block;
            padding: 25px 35px;
            border-radius: 10px;
            font-size: 3rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        nav {
            display: flex;
            justify-content: center;
            background-color: #333;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 10;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        nav a {
            color: white;
            text-decoration: none;
            font-size: 1.3rem;
            transition: color 0.3s, transform 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 5px;
        }
        nav a:hover {
            color: #ffcc00;
            transform: scale(1.1);
            background-color: rgba(255, 204, 0, 0.1);
        }
        .container {
            text-align: center;
            padding: 2rem;
            width: 100%;
            max-width: 1200px;
            margin-top: 3rem;
        }
        .description {
            margin-top: 2rem;
            font-size: 1.3rem;
            line-height: 1.7;
            color: #333;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 3rem;
            background-color: rgba(240, 255, 240, 0.8);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0f7fa;
        }
        .fun-options {
            margin-top: 3rem;
            padding: 2rem;
            background-color: #f9f9f9;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 3rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
        }
... (203 righe a disposizione)
Riduci
homepage.html
11 KB
Anton10 — 21:50
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mappa Interattiva - Menu</title>
Mostra
mappaberlino.html
16 KB
............... — 21:53
https://youtube.com/shorts/J-NAdf6ajzs?si=0uoSEpZwwT_nqLtL
YouTube
telex.24
BERLIN
Immagine
https://youtu.be/hVfBQNENS9s?si=f60tptilxtudsnKD
YouTube
Expedia
Berlin Vacation Travel Guide | Expedia
Immagine
https://youtu.be/oajsJB111hI?si=-zPbk1evltIzao2j
YouTube
telex.24
Berlin zoo
Immagine
﻿
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mappa Interattiva - Menu</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* Stili base per assicurare che la mappa occupi tutto lo spazio */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
      overflow: hidden; /* Impedisce lo scroll della pagina */
    }
    #map {
      height: 100%;
      width: 100%;
      /* Imposta un contesto di stacking per la mappa, sotto i controlli */
      position: relative;
      z-index: 0;
    }
    /* Stile per l'icona personalizzata del punto medio */
    .custom-midpoint-icon div {
      background-color: orange;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 1px solid white;
    }
    /* Nasconde l'output testuale del percorso di Leaflet Routing Machine */
    .leaflet-routing-container {
        display: none;
    }
  </style>
</head>
<body class="h-screen">

  <div id="map"></div>

  <div class="
      fixed z-50 /* Posizionato sopra la mappa (z-index: 0) */
      /* --- Stili Mobile (default) --- */
      bottom-4 inset-x-0 /* Fissato in basso, centrato orizzontalmente */
      flex justify-center /* Centra il wrapper interno */
      pointer-events-none /* Il contenitore non cattura eventi, permette interazione con mappa */

      /* --- Stili Desktop (breakpoint 'md') --- */
      md:pointer-events-auto /* Riabilita eventi per il contenitore su desktop */
      md:inset-x-auto md:left-auto md:right-4 md:top-1/2 /* Posiziona a destra, al centro verticalmente */
      md:w-auto md:-translate-y-1/2 /* Corregge il posizionamento verticale */
      md:flex md:flex-col md:items-end /* Layout verticale, allineato a destra */
    ">

    <div class="relative pointer-events-auto /* Cattura eventi per pulsante/menu */
                md:contents /* Su desktop, questo div non influenza il layout flex del genitore */
               ">

        <div id="map-controls-menu" class="hidden pointer-events-auto /* Nascosto ma interattivo quando visibile */
              /* Stili comuni del pannello */
              bg-white/90 rounded-lg shadow-lg backdrop-blur-sm border border-gray-200

              /* --- Stili Mobile (default) --- */
              absolute bottom-full left-1/2 -translate-x-1/2 mb-2 /* Posizionato sopra il wrapper, centrato */
              w-max max-w-[calc(100vw-2rem)] /* Larghezza massima per evitare overflow */
              p-3 flex flex-wrap justify-center items-center gap-2 /* Layout interno flessibile e a capo */

              /* --- Stili Desktop (breakpoint 'md') --- */
              md:static md:order-1 md:mb-2 /* Ritorna nel flusso normale, sopra il pulsante, con margine sotto */
              md:w-auto md:max-w-none /* Larghezza automatica */
              md:p-4 md:flex md:flex-col md:items-stretch md:gap-3 /* Layout verticale */
            ">

            <button onclick="addMarker()" class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow hover:bg-blue-700 transition-colors cursor-pointer whitespace-nowrap">Aggiungi Marker</button>
            <button onclick="removeMarkers()" class="px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md shadow hover:bg-red-700 transition-colors cursor-pointer whitespace-nowrap">Rimuovi Tutti</button>
            <button onclick="calculateMidpoint()" class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md shadow hover:bg-green-700 transition-colors cursor-pointer whitespace-nowrap">Trova Punto Medio</button>
            <button onclick="removeMidpoint()" class="px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded-md shadow hover:bg-gray-600 transition-colors cursor-pointer whitespace-nowrap">Rimuovi Punto Medio</button>

            <div class="w-full text-center text-xs font-semibold text-gray-800 mt-2 md:text-sm md:mt-1 md:text-left" id="distance">Distanza: -- km</div>
            <div class="w-full text-center text-xs font-semibold text-gray-800 md:text-sm md:text-left" id="time">Tempo a piedi: -- min | Tempo in auto: -- min</div>
        </div>

        <button id="menu-toggle-button" aria-controls="map-controls-menu" aria-expanded="false" class="relative pointer-events-auto /* Assicura che sia cliccabile */
            p-2 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 active:bg-blue-800 transition-colors cursor-pointer
            /* Ordine nel layout flex su desktop */
            md:order-2 md:static /* Posizionamento statico su desktop */
            ">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu block"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x hidden"><line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/></svg>
        </button>

    </div> </div> <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

  <script>
    // Variabili globali per la mappa e gli elementi
    let map;
    let markers = [];
    let routeControl = null;
    let midpointMarker = null;

    // Funzione per inizializzare la mappa
    function initializeMap() {
        const mapElement = document.getElementById('map');
        if (!mapElement) {
            console.error("Errore critico: Elemento #map non trovato nel DOM.");
            return; // Interrompe l'esecuzione se la mappa non esiste
        }

        // Inizializza la mappa sull'elemento #map
        map = L.map('map', {
            // Opzioni aggiuntive se necessario, es. per evitare problemi di rendering
            // preferCanvas: true
        }).setView([40.825, 14.05], 13); // Centro iniziale (es. Monterusciello)

        // Layer di base
        const baseLayers = {
          "Mappa Stradale": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 19
          }).addTo(map), // Aggiunge questo layer di default
          "Satellite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, et al.',
            maxZoom: 19
          })
        };

        // Controllo per cambiare layer
        L.control.layers(baseLayers).addTo(map);

        // Forza il ricalcolo delle dimensioni della mappa
        map.whenReady(() => {
            // Un piccolo ritardo puÃ² aiutare se ci sono problemi di timing con il rendering CSS
            setTimeout(() => map.invalidateSize(), 10);
        });

        // Aggiorna le dimensioni anche al resize della finestra
        window.addEventListener('resize', function() {
            if (map) {
                setTimeout(() => map.invalidateSize(), 100);
            }
        });

        console.log("Mappa inizializzata."); // Messaggio di conferma in console
    }

    // --- Funzioni Gestione Marker, Distanza, Routing, Punto Medio ---
    // (Queste funzioni rimangono identiche alla versione precedente,
    //  con i controlli 'if (!map) return;' all'inizio)

    function addMarker() {
      if (!map) { console.error("Mappa non inizializzata."); return; }
      if (markers.length < 2) {
        const marker = L.marker(map.getCenter(), { draggable: true }).addTo(map)
          .bindPopup(`Marker ${markers.length + 1} (trascinabile)`);
        marker.on('dragend', calculateDistanceAndRoute);
        markers.push(marker);
        calculateDistanceAndRoute();
      } else {
        alert('Puoi aggiungere solo due marker alla volta.');
      }
    }

    function removeMarkers() {
      if (!map) { console.error("Mappa non inizializzata."); return; }
      markers.forEach(marker => map.removeLayer(marker));
      markers = [];
      if (routeControl) {
        map.removeControl(routeControl);
        routeControl = null;
      }
      removeMidpoint();
      document.getElementById('distance').innerText = "Distanza: -- km";
      document.getElementById('time').innerText = "Tempo a piedi: -- min | Tempo in auto: -- min";
    }

    function calculateDistanceAndRoute() {
      const distanceDisplay = document.getElementById('distance');
      const timeDisplay = document.getElementById('time');

      if (!map || markers.length !== 2) {
         distanceDisplay.innerText = "Distanza: -- km";
         timeDisplay.innerText = "Tempo a piedi: -- min | Tempo in auto: -- min";
         if (routeControl) {
            map.removeControl(routeControl);
            routeControl = null;
         }
         removeMidpoint();
         return;
      }

      const latlng1 = markers[0].getLatLng();
      const latlng2 = markers[1].getLatLng();
      const distance = map.distance(latlng1, latlng2) / 1000;
      const walkSpeedKmh = 5;
      const carSpeedKmh = 40;
      const walkTimeMinutes = (distance / walkSpeedKmh) * 60;
      const carTimeMinutes = (distance / carSpeedKmh) * 60;

      distanceDisplay.innerText = `Distanza: ${distance.toFixed(2)} km`;
      timeDisplay.innerText = `A piedi: ${walkTimeMinutes.toFixed(0)} min | In auto: ${carTimeMinutes.toFixed(0)} min`;

      if (routeControl) {
        map.removeControl(routeControl);
      }
      routeControl = L.Routing.control({
        waypoints: [latlng1, latlng2],
        createMarker: () => null,
        routeWhileDragging: false,
        addWaypoints: false,
        show: false,
        fitSelectedRoutes: true,
        lineOptions: {
           styles: [{color: 'blue', opacity: 0.7, weight: 5}]
        }
      }).addTo(map);

      if (midpointMarker) {
          calculateMidpoint(); // Aggiorna posizione punto medio se esiste
      }
    }

    function calculateMidpoint() {
      if (!map) { console.error("Mappa non inizializzata."); return; }
      if (markers.length !== 2) {
        alert("Sono necessari due marker per calcolare il punto medio.");
        return;
      }
      removeMidpoint();
      const latlng1 = markers[0].getLatLng();
      const latlng2 = markers[1].getLatLng();
      const midLat = (latlng1.lat + latlng2.lat) / 2;
      const midLng = (latlng1.lng + latlng2.lng) / 2;

      midpointMarker = L.marker([midLat, midLng], {
        icon: L.divIcon({
          className: 'custom-midpoint-icon',
          html: '<div></div>',
          iconSize: [12, 12],
          iconAnchor: [6, 6]
        })
      }).addTo(map).bindPopup("Punto Medio").openPopup();
    }

    function removeMidpoint() {
      if (map && midpointMarker) {
        map.removeLayer(midpointMarker);
        midpointMarker = null;
      }
    }

    // --- Logica per il Menu a Tendina ---
    function setupMenuToggle() {
        const menuToggleButton = document.getElementById('menu-toggle-button');
        const mapControlsMenu = document.getElementById('map-controls-menu');
        const menuIcon = menuToggleButton.querySelector('.lucide-menu');
        const closeIcon = menuToggleButton.querySelector('.lucide-x');

        if (!menuToggleButton || !mapControlsMenu || !menuIcon || !closeIcon) {
            console.error("Elementi del menu (toggle, container o icone) non trovati!");
            return;
        }

        menuToggleButton.addEventListener('click', (event) => {
          event.stopPropagation(); // Evita che il click si propaghi al document
          const isHidden = mapControlsMenu.classList.toggle('hidden');
          const isNowExpanded = !isHidden;
          menuToggleButton.setAttribute('aria-expanded', String(isNowExpanded));
          // Alterna visibilitÃ  icone
          menuIcon.classList.toggle('hidden', isNowExpanded);
          closeIcon.classList.toggle('hidden', !isNowExpanded);
        });

        // Listener per chiudere il menu cliccando fuori
        document.addEventListener('click', (event) => {
          // Controlla se il menu Ã¨ visibile e se il click NON Ã¨ avvenuto sul pulsante o all'interno del menu
          if (!mapControlsMenu.classList.contains('hidden') &&
              !menuToggleButton.contains(event.target) &&
              !mapControlsMenu.contains(event.target))
          {
              mapControlsMenu.classList.add('hidden'); // Nasconde il menu
              menuToggleButton.setAttribute('aria-expanded', 'false'); // Aggiorna ARIA
              // Ripristina l'icona del menu
              menuIcon.classList.remove('hidden');
              closeIcon.classList.add('hidden');
          }
        });
        console.log("Toggle menu configurato."); // Messaggio di conferma
    }

    // Esegui l'inizializzazione quando il DOM Ã¨ pronto
    document.addEventListener('DOMContentLoaded', () => {
        console.log("DOM caricato. Inizializzazione mappa...");
        initializeMap();
        console.log("Configurazione menu toggle...");
        setupMenuToggle();
        // Assicura che eventuali marker pre-esistenti (improbabile qui) abbiano il listener
        markers.forEach(marker => {
           marker.off('dragend').on('dragend', calculateDistanceAndRoute);
        });
    });

  </script>
</body>
</html>
